{{!
<!---
Copyright 2017 The AMP Start Authors. All Rights Reserved.

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS-IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
-->
}}

{{!
<!--
  The API interaction would ideally be handled with a form tag, instead of
  numerouse amp-list elements, unfortunately there is now way to render
  form response data outside of the `form > div[submit-success]` element.

  For now the app interactivity is provided by using a [src] bound amp-list
  element element in each location of the page the displays dynamic response
  content.

  The attributes common to each amp-list element are defined here. This [src]
  bind statement is already at the max complexity limit (50), so sending
  additional data in the request is not an option.
-->
}}

src="/api/search?maxPrice=800{{!departure=&return=}}&query=&sort=popularity-desc"
[src]="
  '/api/search?maxPrice=' + (query_maxPrice < 801 ? query_maxPrice : 0) +
  {{!'&departure=' + query_departure +}}
  {{!'&return=' + query_return +}}
  '&query=' + query_query +
  (query_city.length ? '&cities[]=' + query_city.join('&cities[]=') : '') +
  (query_type.length ? '&types[]=' + query_type.join('&types[]=') : '') +
  '&sort=' + query_sort
"
